<template>
	<div class="bg-color-base" style="position: relative; overflow-x: auto;">
		<MyDoodle/>
		<div
			id="intro"
			class="min-h-100vh d-flex justify-content-center align-items-end"
		>
			<div
				class="color-white text-center p-10 mb-10 border-radius-medium"
				style="position: relative;"
			>
				<div class="blurry" style="z-index: 1"/>
				<div class="text-size-1 px-4 line-height-compact" style="color: #23110d; position: relative; z-index: 2">–ú–´ –ñ–ï–ù–ò–ú–°–Ø<br>21 –ú–ê–†–¢–ê 2020</div>
			</div>
		</div>

		<div class="d-flex justify-content-center align-items-center">
			<div style="max-width: 800px; position: relative;">
				<el-card class="mt-8 mx-4" style="z-index: 1">
					<div class="text-size-3 text-center mx-10">–ß–∞—Å—Ç—å I: –ó–ê–ì–°</div>
					<p class="font-size-large">–ù–∞—à –∫–æ—Ä–∞–±–ª—å –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–õ—é–±–æ–≤—å" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±—É—Ö—Ç—É –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–°–µ–º—å—è".</p>
					<p class="font-size-large">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±—Ä–∞–∫–∞ —Å –º–∞—Ä—à–µ–º –ú–µ–Ω–¥–µ–ª—å—Å–æ–Ω–∞ –≤ —Å—Ç–∞—Ä–∏–Ω–Ω–æ–º –¥–æ–º–µ —Ñ–æ–Ω –î–µ—Ä–≤–∏–∑–æ–≤, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –≤–æ —Ñ–ª–æ—Ä–µ–Ω—Ç–∏–π—Å–∫–æ–º —Å—Ç–∏–ª–µ. –í —Å–µ—Ä–µ–¥–∏–Ω–µ XX –≤–µ–∫–∞ –≤ –æ—Å–æ–±–Ω—è–∫–µ –±—ã–ª –æ—Ç–∫—Ä—ã—Ç –ø–µ—Ä–≤—ã–π –î–≤–æ—Ä–µ—Ü –±—Ä–∞–∫–æ—Å–æ—á–µ—Ç–∞–Ω–∏—è. –ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤—Å–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å –Ω–∞–º–∏ —ç—Ç–∏ –º–∏–Ω—É—Ç—ã.</p>
					<p class="font-size-large">–î–≤–æ—Ä–µ—Ü –±—Ä–∞–∫–æ—Å–æ—á–µ—Ç–∞–Ω–∏—è ‚Ññ 1, –ê–Ω–≥–ª–∏–π—Å–∫–æ–π –Ω–∞–±., 28. –ù–∞—á–∞–ª–æ –≤ 11:30</p>
				</el-card>

				<el-card class="mt-8 mx-4" style="z-index: 1">
					<div class="text-size-3 text-center mx-10 line-height-compact">–ß–∞—Å—Ç—å II: –§–£–†–®–ï–¢<br>¬´–ù–∞—à–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –∏—Ç–∞–ª—å—è–Ω—Å–∫–∞—è —Å–≤–∞–¥—å–±–∞¬ª</div>
					<p class="font-size-large">–¢–µ–ø–ª–∞—è –Ω–µ–ø—Ä–∏–Ω—É–∂–¥–µ–Ω–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞, –æ–±—â–µ–Ω–∏–µ, —Ç–∞–Ω—Ü—ã, –º—É–∑—ã–∫–∞, –≤–∏–Ω–æ –∏ –ª–µ–≥–∫–∏–µ –∑–∞–∫—É—Å–∫–∏.</p>
					<p class="font-size-large">–í –ø—Ä–æ–≥—Ä–∞–º–º–µ –≤–µ—á–µ—Ä–∞ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è —Å–≤–∞–¥–µ–±–Ω–∞—è —Ü–µ—Ä–µ–º–æ–Ω–∏—è –∏ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –æ—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–æ–π —Ö—É–¥–æ–∂–Ω–∏—Ü—ã. –í—Å–µ –≤–º–µ—Å—Ç–µ –±—É–¥–µ–º —Ä–∏—Å–æ–≤–∞—Ç—å –±–æ–ª—å—à—É—é –∫–∞—Ä—Ç–∏–Ω—É. –ê –ø–æ—á–µ–º—É –∏—Ç–∞–ª—å—è–Ω—Å–∫–∞—è —Å–≤–∞–¥—å–±–∞ —É–∑–Ω–∞–µ—Ç–µ, –∫–æ–≥–¥–∞ –ø—Ä–∏–¥–µ—Ç–µ –∫ –Ω–∞–º.</p>
				</el-card>

				<el-card class="mt-8 mx-4" style="z-index: 1">
					<div class="text-size-3 text-center mx-10 line-height-compact">–ê–î–†–ï–°</div>
					<p class="font-size-large mb-4">–ë–æ–ª—å—à–æ–π –ø—Ä–æ—Å–ø–µ–∫—Ç –ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –¥–æ–º 70-72 (–í—Ö–æ–¥ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —É–ª. –ü–æ–¥–∫–æ–≤—ã—Ä–æ–≤–∞ 5, —á—É—Ç—å –¥–∞–ª—å—à–µ –º–∞–≥–∞–∑–∏–Ω–∞ "–ö—Ä–∞—Å–Ω–æ–µ –∏ –ë–µ–ª–æ–µ"). –ö–≤–∞—Ä—Ç–∏—Ä–∞ 44. –î–æ–º–æ—Ñ–æ–Ω - 4550. 3 —ç—Ç–∞–∂. –¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è –í–∞–ª–µ—Ä–∏–∏ –õ–æ—à–∞–∫</p>
					<img src="~Images/loshak.svg" style="max-width: 100px; margin: 0 auto; display: block;">
					<p class="font-size-large text-center">–ù–∞—á–∞–ª–æ –≤ 18:00.</p>
				</el-card>

				<el-card class="mt-8 mx-4" style="z-index: 1">
					<div class="text-size-4 text-center line-height-compact">–î—Ä–µ—Å—Å-–∫–æ–¥ –¥–ª—è –≥–æ—Å—Ç–µ–π</div>
					<p class="font-size-large">
						<span>–ú - –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∫–æ—Å—Ç—é–º –∏–ª–∏ –∂–∏–ª–µ—Ç —Å —Ä—É–±–∞—à–∫–æ–π</span>
						<span><br>–ñ - –ö–æ–∫—Ç–µ–π–ª—å–Ω–æ–µ –∏–ª–∏ –≤–µ—á–µ—Ä–Ω–µ–µ –ø–ª–∞—Ç—å–µ</span>
					</p>
					<p class="font-size-large">–¶–≤–µ—Ç–æ–≤–∞—è –≥–∞–º–º–∞ –Ω–∞—Ä—è–¥–æ–≤: –ø—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–µ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏, —Å–∏—Ä–µ–Ω–µ–≤—ã–π, –±–∞–∫–ª–∞–∂–∞–Ω, —Å–µ—Ä—ã–π, —Å–µ—Ä–æ-–±–µ–ª—ã–π, –Ω–µ–∂–Ω–æ-–∑–µ–ª–µ–Ω—ã–π, —Ñ–∏—Å—Ç–∞—à–∫–æ–≤—ã–π, –æ–ª–∏–≤–∫–æ–≤—ã–π, –∑–µ–ª–µ–Ω—ã–π –∏ –≤—Å–µ –Ω—é–¥–æ–≤—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏.</p>

					<div class="d-flex flex-wrap justify-content-center">
						<div
							v-for="color in colors"
							:key="color"
							class="p-6 m-4"
							:style="`background-color: ${color}`"
						/>
					</div>
				</el-card>

				<el-card v-if="form.guest1 || form.guest2" class="mt-8 mx-4">
					<div v-if="isSend" class="text-size-4 text-center line-height-compact">üòâ –ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ! –î–æ –≤—Å—Ç—Ä–µ—á–∏ üòâ</div>

					<template v-else>
						<div class="text-size-4 text-center line-height-compact mb-4">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–∞–∑–¥–Ω–∏–∫–µ</div>

						<div class="px-5 d-flex justify-content-center align-items-center">
							<el-form
								ref="form"
								:model="form"
							>
								<div class="mb-3 mt-5">–Ø, {{ form.guest1 }}, —Ç–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ –∫–ª—è–Ω—É—Å—å –ø—Ä–∏–π—Ç–∏</div>

								<el-form-item>
									<el-checkbox v-model="form.iWillGoToZags1" label="–í –ó–ê–ì–° –Ω–∞ —Ü–µ—Ä–µ–º–æ–Ω–∏—é"/>
								</el-form-item>

								<el-form-item>
									<el-checkbox v-model="form.iWillGoToParty1" label="–ù–∞ —Ñ—É—Ä—à–µ—Ç"/>
								</el-form-item>

								<div v-if="form.guest2" class="mt-8">
									<div class="mb-3">–Ø, {{ form.guest2 }}, —Ç–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ –∫–ª—è–Ω—É—Å—å –ø—Ä–∏–π—Ç–∏</div>

									<el-form-item>
										<el-checkbox v-model="form.iWillGoToZags2" label="–í –ó–ê–ì–° –Ω–∞ —Ü–µ—Ä–µ–º–æ–Ω–∏—é"/>
									</el-form-item>

									<el-form-item>
										<el-checkbox v-model="form.iWillGoToParty2" label="–ù–∞ —Ñ—É—Ä—à–µ—Ç"/>
									</el-form-item>
								</div>

								<el-button
									type="primary"
									class="mt-6"
									:loading="isSending"
									@click="iWillCome"
								>–ö–ª–∞—Ü!</el-button>
							</el-form>
						</div>
					</template>
				</el-card>
			</div>
		</div>

		<div class="d-flex justify-content-center py-8">
			<div>‚ù§Ô∏è –°–¥–µ–ª–∞–Ω–æ –†–æ–º–æ–π –∏ –°–∞—à–µ–π, —Å –ª—é–±–æ–≤—å—é ‚ù§Ô∏è</div>
		</div>
	</div>
</template>

<script>
export default {
	name: 'Layout',
	components: {
		MyDoodle: () => import('./MyDoodle'),
	},
	data() {
		return {
			isSending: false,
			isSend: JSON.parse(localStorage.getItem('isSend')),
			form: {
				guest1: (new URLSearchParams(window.location.search)).get('guest1'),
				iWillGoToZags1: false,
				iWillGoToParty1: false,
				guest2: (new URLSearchParams(window.location.search)).get('guest2'),
				iWillGoToZags2: false,
				iWillGoToParty2: false,
			},
			colors: [
				'#321730',
				'#4e2b4b',
				'#8a5689',
				'#dadbbb',
				'#a5a681',
				'#969495',
				'#373940',
				'#2f1e0a',
				'#0e0e13',
				'#e9f0c0',
				'#dcd294',
				'#aec55d',
				'#96af4c',
				'#739c3e',
				'#686573',
				'#71879a',
				'#b1c5d4',
				'#d6d7dc',
				'#d8b9aa',
				'#e4bcbc',
				'#e7ceb4',
				'#b4856e',
			],
		}
	},
	computed: {
		/* isDisabled() {
			if (this.form.guest2) {
				return !(this.form.iWillGoToZags1 || this.form.iWillGoToParty1) || !(this.form.iWillGoToZags2 || this.form.iWillGoToParty2)
			}

			return !(this.form.iWillGoToZags1 || this.form.iWillGoToParty1)
		}, */
	},
	methods: {
		async iWillCome() {
			try {
				this.isSending = true
				let text = ''

				if (this.form.guest1) {
					text += `–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ ${this.form.guest1} –≤ –ó–ê–ì–° ${this.form.iWillGoToZags1 ? '–ø—Ä–∏–¥—É' : '–ù–ï –ø—Ä–∏–¥—É'}, –Ω–∞ —Ñ—É—Ä—à–µ—Ç ${this.form.iWillGoToParty1 ? '–ø—Ä–∏–¥—É' : '–ù–ï –ø—Ä–∏–¥—É'}.`
				}

				if (this.form.guest2) {
					text += ` –ò ${this.form.guest2} –≤ –ó–ê–ì–° ${this.form.iWillGoToZags2 ? '–ø—Ä–∏–¥—É' : '–ù–ï –ø—Ä–∏–¥—É'}, –Ω–∞ —Ñ—É—Ä—à–µ—Ç ${this.form.iWillGoToParty2 ? '–ø—Ä–∏–¥—É' : '–ù–ï –ø—Ä–∏–¥—É'}.`
				}

				await fetch('https://mailer.api.coding-cats.com/x-send-mail', {
					method: 'POST',
					headers: {
						Accept: 'application/json',
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({ text }),
				})

				this.isSend = true
				localStorage.setItem('isSend', this.isSend)
			} catch (error) {
				console.dir(error) // eslint-disable-line no-console
			} finally {
				this.isSending = false
			}
		},
	},
}
</script>

<style lang="scss">
@import 'ScssVariables';

body {
	font-size: 14px;
	overflow-y: overlay !important;
}

hr {
	border-width: 0;
	height: 2px;
	background-color: $--color-text-placeholder;
}

#intro {
	background-image: url('~Images/1-intro.jpg');
	background-position: center;
	background-size: cover;
	background-repeat: no-repeat;
}

.blurry {
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	top: 0;
	filter: blur(10px) brightness(1.4);
	background-image: url('~Images/1-intro.jpg');
	background-position: center;
}

.text-size-1 {
	font-size: 4rem;

	@media screen and (max-width: 700px) {
		font-size: 1.8rem;
	}
}

.text-size-2 {
	font-size: 3rem;
}

.text-size-3 {
	font-size: 2rem;

	@media screen and (max-width: 700px) {
		font-size: 1.4rem;
	}
}

.text-size-4 {
	font-size: 1.5rem;
}

.el-form {
	.el-form-item {
		margin-bottom: 0;
	}
}
</style>